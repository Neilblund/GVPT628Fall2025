<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Classwork 1: Indexing and subsetting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="classwork_files/libs/clipboard/clipboard.min.js"></script>
<script src="classwork_files/libs/quarto-html/quarto.js"></script>
<script src="classwork_files/libs/quarto-html/popper.min.js"></script>
<script src="classwork_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="classwork_files/libs/quarto-html/anchor.min.js"></script>
<link href="classwork_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="classwork_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="classwork_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="classwork_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="classwork_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-and-packages" id="toc-data-and-packages" class="nav-link active" data-scroll-target="#data-and-packages">Data and packages</a></li>
  <li><a href="#using-a-pipe" id="toc-using-a-pipe" class="nav-link" data-scroll-target="#using-a-pipe">Using a pipe</a>
  <ul class="collapse">
  <li><a href="#q1" id="toc-q1" class="nav-link" data-scroll-target="#q1">Q1</a></li>
  <li><a href="#q2" id="toc-q2" class="nav-link" data-scroll-target="#q2">Q2</a></li>
  <li><a href="#q3" id="toc-q3" class="nav-link" data-scroll-target="#q3">Q3</a></li>
  </ul></li>
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link" data-scroll-target="#subsetting">Subsetting</a>
  <ul class="collapse">
  <li><a href="#q5" id="toc-q5" class="nav-link" data-scroll-target="#q5">Q5</a></li>
  </ul></li>
  <li><a href="#frequency-tables" id="toc-frequency-tables" class="nav-link" data-scroll-target="#frequency-tables">Frequency tables</a></li>
  <li><a href="#crosstabs" id="toc-crosstabs" class="nav-link" data-scroll-target="#crosstabs">Crosstabs</a>
  <ul class="collapse">
  <li><a href="#q6" id="toc-q6" class="nav-link" data-scroll-target="#q6">Q6</a></li>
  </ul></li>
  <li><a href="#the-janitor-package" id="toc-the-janitor-package" class="nav-link" data-scroll-target="#the-janitor-package">The Janitor package</a></li>
  <li><a href="#aggregation-and-grouping" id="toc-aggregation-and-grouping" class="nav-link" data-scroll-target="#aggregation-and-grouping">Aggregation and grouping</a>
  <ul class="collapse">
  <li><a href="#dplyr-method" id="toc-dplyr-method" class="nav-link" data-scroll-target="#dplyr-method">dplyr method:</a></li>
  <li><a href="#q7" id="toc-q7" class="nav-link" data-scroll-target="#q7">Q7</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a>
  <ul class="collapse">
  <li><a href="#q8" id="toc-q8" class="nav-link" data-scroll-target="#q8">Q8</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Classwork 1: Indexing and subsetting</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This document was created using <a href="https://quarto.org/docs/get-started/hello/rstudio.html">Quarto</a> a sort of language for combining code and text. When you’re following along in class, you can either copy-paste code directly from this page into an R-studio script file, or you can go over to the github site for this class, download the .qmd file for this classwork and then open it in R-studio and work with it as an interactive document.</p>
<section id="data-and-packages" class="level1 page-columns page-full">
<h1>Data and packages</h1>
<p>You’ll want to start by loading the CHES data. We can do this using the <code>read_csv</code> function from the readr package. We <em>could</em> access this data set by downloading it from the <a href="https://www.chesdata.eu/">CHES website</a> and then importing it from a local file, but for <code>.csv</code> files like this one, we can actually download it by putting the web address directly in to our function in quotation marks:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>ches<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">'https://www.chesdata.eu/s/CHES_2024_final_v2.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After you’ve imported the data, take a second to <code>View()</code> the data frame you just imported and see how things are coded.</p>
<p>Note that in the raw csv data, the party family variable is initially a set of numbers instead of a text value.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>family[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 5 7 7 3</code></pre>
</div>
</div>
<p>In order to convert these to text, we’ll need to <a href="https://static1.squarespace.com/static/5975c9bfdb29d6a05c65209b/t/6881094b92e5c57f83d73e8f/1753286987723/CHES+2024+Codebook.pdf">consult the codebook</a> and then convert the numeric variables to their respective text values.</p>
<p>R has a special built-in data type for this exact scenario called a “factor variable”.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p>R factors are often a source of confusion for new users. Under the hood, a factor variable is just a set of numbers with an extra piece of data that maps those numeric values to text labels. We could also store variables like this as regular text values, but factor variables are helpful because they can make it easier to do things like fix the ordering of survey response items when we’re making a graph or table.</p>
</div></div><p>We’ll talk more about working with factors later on, but for now it’s sufficient to know that we’re doing this to turn the numbers into readable text:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>labels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Radical Right"</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Conservatives"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Liberal"</span>, </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Christian-Democratic"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Socialist"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Radical Left"</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Green"</span>, </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Regionalist"</span>, </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>          <span class="st">"No family"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Confessional"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Agrarian/Center"</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>family<span class="ot">&lt;-</span><span class="fu">factor</span>(ches<span class="sc">$</span>family, <span class="at">labels=</span>labels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’ll do the same thing for the “country” variable:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>country_levels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>          <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">31</span>, <span class="dv">34</span>, <span class="dv">35</span>, <span class="dv">36</span>, <span class="dv">37</span>, <span class="dv">38</span>, <span class="dv">40</span>, <span class="dv">45</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>country_labels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Belgium"</span>, <span class="st">"Denmark"</span>, <span class="st">"Germany"</span>, <span class="st">"Greece"</span>, <span class="st">"Spain"</span>, <span class="st">"France"</span>, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Ireland"</span>, <span class="st">"Italy"</span>, <span class="st">"Netherlands"</span>,  <span class="st">"United Kingdom"</span>, <span class="st">"Portugal"</span>, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Austria"</span>, <span class="st">"Finland"</span>, <span class="st">"Sweden"</span>, <span class="st">"Bulgaria"</span>, <span class="st">"Czech Republic"</span>,  </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Estonia"</span>, <span class="st">"Hungary"</span>, <span class="st">"Latvia"</span>, <span class="st">"Lithuania"</span>,<span class="st">"Poland"</span>, <span class="st">"Romania"</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Slovakia"</span>, <span class="st">"Slovenia"</span>, <span class="st">"Croatia"</span>, <span class="st">"Turkey"</span>, <span class="st">"Norway"</span>, <span class="st">"Switzerland"</span>, </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Malta"</span>, <span class="st">"Luxembourg"</span>, <span class="st">"Cyprus"</span>, <span class="st">"Iceland"</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>country<span class="ot">&lt;-</span><span class="fu">factor</span>(ches<span class="sc">$</span>country, <span class="at">levels=</span>country_levels, <span class="at">labels=</span>country_labels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Take a minute to <code>View()</code> the data set and see how things are coded now.</p>
</section>
<section id="using-a-pipe" class="level1">
<h1>Using a pipe</h1>
<p>A lot of code you’ll see in this course will use the “pipe” operator. Pipes are a way of making code more readable by chaining together a set of operations so that they read from left to right.</p>
<p>Consider a script that creates 100 random numbers, exponentiates them, sorts them from highest to lowest, and then plots the result. One way to do this would be with a set of nested commands like this:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get 100 samples from a normal distribution with mean zero and sd =1 and plot them</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">sort</span>(<span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="classwork_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Alternatively, we could write each step on a separate line and assign the results to a new variable:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get 100 samples from a normal distribution with mean zero and sd =1 </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># exponentiate it</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>exp_x<span class="ot">&lt;-</span><span class="fu">exp</span>(x)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># sort it </span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>sorted_x<span class="ot">&lt;-</span><span class="fu">sort</span>(exp_x)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the result</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(sorted_x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="classwork_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>Using the pipe operator allows us to perform this same operation without the nested parentheses or the creation of intermediate variables:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">100</span>)<span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exp</span>()<span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>()<span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="classwork_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>Note that the pipe command will default to using the left-hand-side object as the first argument for the right hand side, but you can explicitly reference the left-hand-side variable using the <code>_</code>. This is especially useful for functions that don’t take “data” as their first argument. One example of this is the <code>lm()</code> command:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This gives an error:</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(eu_position <span class="sc">~</span> immigrate_policy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in as.data.frame.default(data): cannot coerce class '"formula"' to a data.frame</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this works</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(eu_position <span class="sc">~</span> immigrate_policy, <span class="at">data=</span>_)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = eu_position ~ immigrate_policy, data = ches)

Coefficients:
     (Intercept)  immigrate_policy  
          6.8833           -0.3641  </code></pre>
</div>
</div>
<p>The <code>%&gt;%</code> is a version of the pipe that is associated with the <code>magrittr</code> package. This <em>mostly</em> works just like the <code>|&gt;</code> pipe that is part of base R, but it has some minor differences such as using <code>.</code> instead of <code>_</code> to reference data. (I mention it here because you might see it elsewhere, especially in code that pre-dates the introduction of a native pipe operator)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(eu_position <span class="sc">~</span> immigrate_policy, <span class="at">data=</span>.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = eu_position ~ immigrate_policy, data = .)

Coefficients:
     (Intercept)  immigrate_policy  
          6.8833           -0.3641  </code></pre>
</div>
</div>
<section id="q1" class="level2">
<h2 class="anchored" data-anchor-id="q1">Q1</h2>
<p>Restate the following operation using a sequence of pipes</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>chesfam<span class="ot">&lt;-</span><span class="fu">subset</span>(ches, <span class="at">select=</span>family) <span class="co"># retrieving only the families column</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>chesfam<span class="ot">&lt;-</span><span class="fu">table</span>(chesfam) <span class="co"># creating a frequency table</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>chesfam<span class="ot">&lt;-</span><span class="fu">sort</span>(chesfam) <span class="co"># sorting from lowest to highest</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># type your code here...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="q2" class="level2">
<h2 class="anchored" data-anchor-id="q2">Q2</h2>
<p>Use one of the pipe operators to retrieve only the countries that are EU members (you’ll want to use the <code>subset</code> function for this)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># type your code here...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="q3" class="level2">
<h2 class="anchored" data-anchor-id="q3">Q3</h2>
<p>Use the pipe operator to get the square root of the variance for <code>lrecon</code> (which measures the left-right positioning for each party)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># type your code here...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="subsetting" class="level1">
<h1>Subsetting</h1>
<p>Remember we have several options for sub-setting data sets. The most basic is by using a logical operator. For instance: the expression <code>ches$family=="Confessional"</code> would return <code>TRUE</code> for any element where the value of family was “Confessional” and <code>FALSE</code> for any element where it didn’t. Now I can use this logical vector to subset my data frame, returning all rows for confessional parties:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>confessional_parties<span class="ot">&lt;-</span>ches[ches<span class="sc">$</span>family<span class="sc">==</span><span class="st">"Confessional"</span>, ]</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>confessional_parties</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">party_id</th>
<th style="text-align: left;">party</th>
<th style="text-align: left;">family</th>
<th style="text-align: right;">electionyear</th>
<th style="text-align: right;">vote</th>
<th style="text-align: right;">seat</th>
<th style="text-align: right;">epvote</th>
<th style="text-align: right;">eu_position</th>
<th style="text-align: right;">eu_salience</th>
<th style="text-align: right;">eu_dissent</th>
<th style="text-align: right;">eu_blur</th>
<th style="text-align: right;">lrecon</th>
<th style="text-align: right;">lrecon_blur</th>
<th style="text-align: right;">lrecon_dissent</th>
<th style="text-align: right;">lrecon_salience</th>
<th style="text-align: right;">galtan</th>
<th style="text-align: right;">galtan_blur</th>
<th style="text-align: right;">galtan_dissent</th>
<th style="text-align: right;">galtan_salience</th>
<th style="text-align: right;">lrgen</th>
<th style="text-align: right;">immigrate_policy</th>
<th style="text-align: right;">immigrate_salience</th>
<th style="text-align: right;">immigrate_dissent</th>
<th style="text-align: right;">multiculturalism</th>
<th style="text-align: right;">multicult_salience</th>
<th style="text-align: right;">redistribution</th>
<th style="text-align: right;">redist_salience</th>
<th style="text-align: right;">climate_change</th>
<th style="text-align: right;">climate_change_salience</th>
<th style="text-align: right;">environment</th>
<th style="text-align: right;">environment_salience</th>
<th style="text-align: right;">spendvtax</th>
<th style="text-align: right;">deregulation</th>
<th style="text-align: right;">civlib_laworder</th>
<th style="text-align: right;">womens_rights</th>
<th style="text-align: right;">lgbtq_rights</th>
<th style="text-align: right;">samesex_marriage</th>
<th style="text-align: right;">religious_principles</th>
<th style="text-align: right;">ethnic_minorities</th>
<th style="text-align: right;">nationalism</th>
<th style="text-align: right;">urban_rural</th>
<th style="text-align: right;">protectionism</th>
<th style="text-align: right;">regions</th>
<th style="text-align: right;">executive_power</th>
<th style="text-align: right;">judicial_independence</th>
<th style="text-align: right;">corrupt_salience</th>
<th style="text-align: right;">anti_islam</th>
<th style="text-align: right;">people_v_elite</th>
<th style="text-align: right;">anti_elite_salience</th>
<th style="text-align: right;">eu_foreign</th>
<th style="text-align: right;">eu_intmark</th>
<th style="text-align: right;">eu_russia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Greece</td>
<td style="text-align: right;">419</td>
<td style="text-align: left;">Niki</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4.37</td>
<td style="text-align: right;">2.777778</td>
<td style="text-align: right;">3.555556</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">6.4</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">6.250000</td>
<td style="text-align: right;">1.500000</td>
<td style="text-align: right;">2.833333</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">0.2500000</td>
<td style="text-align: right;">1.166667</td>
<td style="text-align: right;">9.300000</td>
<td style="text-align: right;">9.200000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.888889</td>
<td style="text-align: right;">0.3333333</td>
<td style="text-align: right;">9.625000</td>
<td style="text-align: right;">7.375000</td>
<td style="text-align: right;">5.750000</td>
<td style="text-align: right;">2.600000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">1.3333334</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">9.200000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">9.600000</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.714286</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">7.500000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.50</td>
<td style="text-align: right;">6.666666</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">8.5000000</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">9.50</td>
</tr>
<tr class="even">
<td style="text-align: left;">Netherlands</td>
<td style="text-align: right;">1006</td>
<td style="text-align: left;">SGP</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.08</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.70</td>
<td style="text-align: right;">2.750000</td>
<td style="text-align: right;">3.454546</td>
<td style="text-align: right;">2.250000</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">2.333333</td>
<td style="text-align: right;">4.083334</td>
<td style="text-align: right;">9.416667</td>
<td style="text-align: right;">0.3750000</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">8.666667</td>
<td style="text-align: right;">5.750000</td>
<td style="text-align: right;">1.5000000</td>
<td style="text-align: right;">8.600000</td>
<td style="text-align: right;">6.875000</td>
<td style="text-align: right;">4.857143</td>
<td style="text-align: right;">3.625000</td>
<td style="text-align: right;">6.200000</td>
<td style="text-align: right;">3.0000000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">6.666666</td>
<td style="text-align: right;">8.250000</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.833333</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.857142</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">8.571428</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">3.500000</td>
<td style="text-align: right;">5.250000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">1.7777778</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">4.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Netherlands</td>
<td style="text-align: right;">1016</td>
<td style="text-align: left;">CU</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.04</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.89</td>
<td style="text-align: right;">4.583334</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">1.600000</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">6.916666</td>
<td style="text-align: right;">1.5714285</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">4.583334</td>
<td style="text-align: right;">4.250000</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">3.1666667</td>
<td style="text-align: right;">5.272728</td>
<td style="text-align: right;">5.222222</td>
<td style="text-align: right;">4.111111</td>
<td style="text-align: right;">4.666666</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">4.7500000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">4.000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.200000</td>
<td style="text-align: right;">4.600000</td>
<td style="text-align: right;">6.200000</td>
<td style="text-align: right;">5.400000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">1.600000</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">0.8888889</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">3.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Finland</td>
<td style="text-align: right;">1409</td>
<td style="text-align: left;">KD</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">5.111111</td>
<td style="text-align: right;">3.142857</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">4.200000</td>
<td style="text-align: right;">5.818182</td>
<td style="text-align: right;">8.818182</td>
<td style="text-align: right;">2.2000000</td>
<td style="text-align: right;">1.333333</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">7.545454</td>
<td style="text-align: right;">7.181818</td>
<td style="text-align: right;">4.909091</td>
<td style="text-align: right;">2.4000001</td>
<td style="text-align: right;">8.090909</td>
<td style="text-align: right;">4.800000</td>
<td style="text-align: right;">5.700000</td>
<td style="text-align: right;">5.090909</td>
<td style="text-align: right;">6.400000</td>
<td style="text-align: right;">3.5999999</td>
<td style="text-align: right;">5.800000</td>
<td style="text-align: right;">3.800</td>
<td style="text-align: right;">6.875000</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">6.500000</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">9.400000</td>
<td style="text-align: right;">6.833334</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">5.833334</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">5.428571</td>
<td style="text-align: right;">3.600000</td>
<td style="text-align: right;">3.400000</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">2.25</td>
<td style="text-align: right;">2.2857144</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">3.750000</td>
<td style="text-align: right;">1.75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Turkey</td>
<td style="text-align: right;">3416</td>
<td style="text-align: left;">YRP</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.81</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.250000</td>
<td style="text-align: right;">1.538462</td>
<td style="text-align: right;">0.200000</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">6.166666</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">0.800000</td>
<td style="text-align: right;">6.785714</td>
<td style="text-align: right;">9.785714</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">1.250000</td>
<td style="text-align: right;">8.714286</td>
<td style="text-align: right;">9.142858</td>
<td style="text-align: right;">6.750000</td>
<td style="text-align: right;">6.307692</td>
<td style="text-align: right;">1.9090909</td>
<td style="text-align: right;">7.416666</td>
<td style="text-align: right;">7.416666</td>
<td style="text-align: right;">4.428571</td>
<td style="text-align: right;">5.461538</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">0.6666667</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">2.375</td>
<td style="text-align: right;">3.875000</td>
<td style="text-align: right;">4.500000</td>
<td style="text-align: right;">8.285714</td>
<td style="text-align: right;">9.285714</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">7.500000</td>
<td style="text-align: right;">8.571428</td>
<td style="text-align: right;">5.428571</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">8.666667</td>
<td style="text-align: right;">6.833334</td>
<td style="text-align: right;">4.75</td>
<td style="text-align: right;">7.333334</td>
<td style="text-align: right;">2.40</td>
<td style="text-align: right;">7.8571429</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Switzerland</td>
<td style="text-align: right;">3607</td>
<td style="text-align: left;">EVP/PEV</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1.95</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.900000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">5.090909</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.428571</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">0.6666667</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">7.900000</td>
<td style="text-align: right;">5.636363</td>
<td style="text-align: right;">4.750000</td>
<td style="text-align: right;">2.833333</td>
<td style="text-align: right;">2.4000001</td>
<td style="text-align: right;">7.375000</td>
<td style="text-align: right;">5.600000</td>
<td style="text-align: right;">4.111111</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">4.0000000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">6.000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.400000</td>
<td style="text-align: right;">8.333333</td>
<td style="text-align: right;">6.800000</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">8.285714</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">6.600000</td>
<td style="text-align: right;">6.250000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.500000</td>
<td style="text-align: right;">1.750000</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">8.20</td>
<td style="text-align: right;">1.3333334</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Switzerland</td>
<td style="text-align: right;">3608</td>
<td style="text-align: left;">EDU/UDF</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1.23</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.833333</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">7.222222</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.571429</td>
<td style="text-align: right;">9.250000</td>
<td style="text-align: right;">0.3333333</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">8.700000</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">8.636364</td>
<td style="text-align: right;">6.888889</td>
<td style="text-align: right;">0.8571429</td>
<td style="text-align: right;">8.727273</td>
<td style="text-align: right;">7.714286</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">3.600000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.6666667</td>
<td style="text-align: right;">7.666666</td>
<td style="text-align: right;">3.000</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.833333</td>
<td style="text-align: right;">8.714286</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">2.50</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">9.20</td>
<td style="text-align: right;">4.0000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can also chain together multiple logical expressions to get a more specific slice of the data. For instance, maybe I only want agrarian parties whose position on economic issues is greater than or equal to 5. I could get by combining two logical comparisons with an ampersand:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>right_agrarians<span class="ot">&lt;-</span>ches[ches<span class="sc">$</span>family <span class="sc">==</span> <span class="st">"Agrarian/Center"</span> <span class="sc">&amp;</span> ches<span class="sc">$</span>lrecon<span class="sc">&gt;=</span><span class="dv">5</span>,]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>right_agrarians</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">party_id</th>
<th style="text-align: left;">party</th>
<th style="text-align: left;">family</th>
<th style="text-align: right;">electionyear</th>
<th style="text-align: right;">vote</th>
<th style="text-align: right;">seat</th>
<th style="text-align: right;">epvote</th>
<th style="text-align: right;">eu_position</th>
<th style="text-align: right;">eu_salience</th>
<th style="text-align: right;">eu_dissent</th>
<th style="text-align: right;">eu_blur</th>
<th style="text-align: right;">lrecon</th>
<th style="text-align: right;">lrecon_blur</th>
<th style="text-align: right;">lrecon_dissent</th>
<th style="text-align: right;">lrecon_salience</th>
<th style="text-align: right;">galtan</th>
<th style="text-align: right;">galtan_blur</th>
<th style="text-align: right;">galtan_dissent</th>
<th style="text-align: right;">galtan_salience</th>
<th style="text-align: right;">lrgen</th>
<th style="text-align: right;">immigrate_policy</th>
<th style="text-align: right;">immigrate_salience</th>
<th style="text-align: right;">immigrate_dissent</th>
<th style="text-align: right;">multiculturalism</th>
<th style="text-align: right;">multicult_salience</th>
<th style="text-align: right;">redistribution</th>
<th style="text-align: right;">redist_salience</th>
<th style="text-align: right;">climate_change</th>
<th style="text-align: right;">climate_change_salience</th>
<th style="text-align: right;">environment</th>
<th style="text-align: right;">environment_salience</th>
<th style="text-align: right;">spendvtax</th>
<th style="text-align: right;">deregulation</th>
<th style="text-align: right;">civlib_laworder</th>
<th style="text-align: right;">womens_rights</th>
<th style="text-align: right;">lgbtq_rights</th>
<th style="text-align: right;">samesex_marriage</th>
<th style="text-align: right;">religious_principles</th>
<th style="text-align: right;">ethnic_minorities</th>
<th style="text-align: right;">nationalism</th>
<th style="text-align: right;">urban_rural</th>
<th style="text-align: right;">protectionism</th>
<th style="text-align: right;">regions</th>
<th style="text-align: right;">executive_power</th>
<th style="text-align: right;">judicial_independence</th>
<th style="text-align: right;">corrupt_salience</th>
<th style="text-align: right;">anti_islam</th>
<th style="text-align: right;">people_v_elite</th>
<th style="text-align: right;">anti_elite_salience</th>
<th style="text-align: right;">eu_foreign</th>
<th style="text-align: right;">eu_intmark</th>
<th style="text-align: right;">eu_russia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Finland</td>
<td style="text-align: right;">1403</td>
<td style="text-align: left;">KESK</td>
<td style="text-align: left;">Agrarian/Center</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">11.3</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">11.76</td>
<td style="text-align: right;">4.818182</td>
<td style="text-align: right;">5.600000</td>
<td style="text-align: right;">3.857143</td>
<td style="text-align: right;">4.500000</td>
<td style="text-align: right;">5.818182</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">4.600000</td>
<td style="text-align: right;">6.363637</td>
<td style="text-align: right;">6.454546</td>
<td style="text-align: right;">4.600</td>
<td style="text-align: right;">4.666666</td>
<td style="text-align: right;">4.636363</td>
<td style="text-align: right;">5.727272</td>
<td style="text-align: right;">5.636363</td>
<td style="text-align: right;">4.818182</td>
<td style="text-align: right;">4.9090910</td>
<td style="text-align: right;">6.272728</td>
<td style="text-align: right;">5.272728</td>
<td style="text-align: right;">5.090909</td>
<td style="text-align: right;">6.090909</td>
<td style="text-align: right;">5.800000</td>
<td style="text-align: right;">4.800000</td>
<td style="text-align: right;">5.500000</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">5.25</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">5.500000</td>
<td style="text-align: right;">3.833333</td>
<td style="text-align: right;">5.40</td>
<td style="text-align: right;">5.6666665</td>
<td style="text-align: right;">6.4</td>
<td style="text-align: right;">5.833334</td>
<td style="text-align: right;">5.8</td>
<td style="text-align: right;">9.166667</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.285714</td>
<td style="text-align: right;">3.600000</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">1.750000</td>
<td style="text-align: right;">3.714286</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">4.400000</td>
<td style="text-align: right;">1.500000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sweden</td>
<td style="text-align: right;">1603</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">Agrarian/Center</td>
<td style="text-align: right;">2022</td>
<td style="text-align: right;">6.7</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">7.29</td>
<td style="text-align: right;">6.105263</td>
<td style="text-align: right;">4.526316</td>
<td style="text-align: right;">3.500000</td>
<td style="text-align: right;">3.153846</td>
<td style="text-align: right;">7.842105</td>
<td style="text-align: right;">2.090909</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">2.947368</td>
<td style="text-align: right;">2.375</td>
<td style="text-align: right;">2.400000</td>
<td style="text-align: right;">6.631579</td>
<td style="text-align: right;">5.947369</td>
<td style="text-align: right;">3.421053</td>
<td style="text-align: right;">6.157895</td>
<td style="text-align: right;">3.3157895</td>
<td style="text-align: right;">3.315790</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">6.578947</td>
<td style="text-align: right;">5.368421</td>
<td style="text-align: right;">2.888889</td>
<td style="text-align: right;">7.222222</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">7.500000</td>
<td style="text-align: right;">7.50</td>
<td style="text-align: right;">8.533334</td>
<td style="text-align: right;">3.100000</td>
<td style="text-align: right;">2.444444</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">0.8888889</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">3.090909</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: right;">6.777778</td>
<td style="text-align: right;">1.222222</td>
<td style="text-align: right;">4.285714</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">1.777778</td>
<td style="text-align: right;">2.142857</td>
<td style="text-align: right;">2.545454</td>
<td style="text-align: right;">2.166667</td>
<td style="text-align: right;">4.4</td>
<td style="text-align: right;">6.444445</td>
<td style="text-align: right;">2.666667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Iceland</td>
<td style="text-align: right;">4503</td>
<td style="text-align: left;">F</td>
<td style="text-align: left;">Agrarian/Center</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">7.8</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">2.800000</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">2.333333</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">3.200</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">5.500000</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">4.666666</td>
<td style="text-align: right;">3.6666667</td>
<td style="text-align: right;">6.666666</td>
<td style="text-align: right;">4.166666</td>
<td style="text-align: right;">4.833334</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">4.400000</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">0.5000000</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">8.0</td>
<td style="text-align: right;">9.250000</td>
<td style="text-align: right;">8.333333</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Iceland</td>
<td style="text-align: right;">4504</td>
<td style="text-align: left;">M</td>
<td style="text-align: left;">Agrarian/Center</td>
<td style="text-align: right;">2021</td>
<td style="text-align: right;">12.1</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.166667</td>
<td style="text-align: right;">5.833334</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">0.400000</td>
<td style="text-align: right;">8.333333</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">7.666666</td>
<td style="text-align: right;">8.833333</td>
<td style="text-align: right;">2.400</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">8.166667</td>
<td style="text-align: right;">8.500000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">8.833333</td>
<td style="text-align: right;">0.6666667</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">7.800000</td>
<td style="text-align: right;">9.666667</td>
<td style="text-align: right;">8.666667</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">9.00</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">8.333333</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">5.50</td>
<td style="text-align: right;">2.6666667</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">9.5</td>
<td style="text-align: right;">8.500000</td>
<td style="text-align: right;">7.666666</td>
<td style="text-align: right;">3.500000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can also use the <code>subset</code> function to do the same operation above. Note that this function expects a data set as its first argument, and, once we’ve specified that, we can reference columns within that data set without needing to use the <code>$</code> notation:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(ches, family <span class="sc">==</span> <span class="st">"Confessional"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">party_id</th>
<th style="text-align: left;">party</th>
<th style="text-align: left;">family</th>
<th style="text-align: right;">electionyear</th>
<th style="text-align: right;">vote</th>
<th style="text-align: right;">seat</th>
<th style="text-align: right;">epvote</th>
<th style="text-align: right;">eu_position</th>
<th style="text-align: right;">eu_salience</th>
<th style="text-align: right;">eu_dissent</th>
<th style="text-align: right;">eu_blur</th>
<th style="text-align: right;">lrecon</th>
<th style="text-align: right;">lrecon_blur</th>
<th style="text-align: right;">lrecon_dissent</th>
<th style="text-align: right;">lrecon_salience</th>
<th style="text-align: right;">galtan</th>
<th style="text-align: right;">galtan_blur</th>
<th style="text-align: right;">galtan_dissent</th>
<th style="text-align: right;">galtan_salience</th>
<th style="text-align: right;">lrgen</th>
<th style="text-align: right;">immigrate_policy</th>
<th style="text-align: right;">immigrate_salience</th>
<th style="text-align: right;">immigrate_dissent</th>
<th style="text-align: right;">multiculturalism</th>
<th style="text-align: right;">multicult_salience</th>
<th style="text-align: right;">redistribution</th>
<th style="text-align: right;">redist_salience</th>
<th style="text-align: right;">climate_change</th>
<th style="text-align: right;">climate_change_salience</th>
<th style="text-align: right;">environment</th>
<th style="text-align: right;">environment_salience</th>
<th style="text-align: right;">spendvtax</th>
<th style="text-align: right;">deregulation</th>
<th style="text-align: right;">civlib_laworder</th>
<th style="text-align: right;">womens_rights</th>
<th style="text-align: right;">lgbtq_rights</th>
<th style="text-align: right;">samesex_marriage</th>
<th style="text-align: right;">religious_principles</th>
<th style="text-align: right;">ethnic_minorities</th>
<th style="text-align: right;">nationalism</th>
<th style="text-align: right;">urban_rural</th>
<th style="text-align: right;">protectionism</th>
<th style="text-align: right;">regions</th>
<th style="text-align: right;">executive_power</th>
<th style="text-align: right;">judicial_independence</th>
<th style="text-align: right;">corrupt_salience</th>
<th style="text-align: right;">anti_islam</th>
<th style="text-align: right;">people_v_elite</th>
<th style="text-align: right;">anti_elite_salience</th>
<th style="text-align: right;">eu_foreign</th>
<th style="text-align: right;">eu_intmark</th>
<th style="text-align: right;">eu_russia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Greece</td>
<td style="text-align: right;">419</td>
<td style="text-align: left;">Niki</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4.37</td>
<td style="text-align: right;">2.777778</td>
<td style="text-align: right;">3.555556</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">6.4</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">6.250000</td>
<td style="text-align: right;">1.500000</td>
<td style="text-align: right;">2.833333</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">0.2500000</td>
<td style="text-align: right;">1.166667</td>
<td style="text-align: right;">9.300000</td>
<td style="text-align: right;">9.200000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.888889</td>
<td style="text-align: right;">0.3333333</td>
<td style="text-align: right;">9.625000</td>
<td style="text-align: right;">7.375000</td>
<td style="text-align: right;">5.750000</td>
<td style="text-align: right;">2.600000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">1.3333334</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">9.200000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">9.600000</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.714286</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">7.500000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.50</td>
<td style="text-align: right;">6.666666</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">8.5000000</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">9.50</td>
</tr>
<tr class="even">
<td style="text-align: left;">Netherlands</td>
<td style="text-align: right;">1006</td>
<td style="text-align: left;">SGP</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.08</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.70</td>
<td style="text-align: right;">2.750000</td>
<td style="text-align: right;">3.454546</td>
<td style="text-align: right;">2.250000</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">2.333333</td>
<td style="text-align: right;">4.083334</td>
<td style="text-align: right;">9.416667</td>
<td style="text-align: right;">0.3750000</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">8.666667</td>
<td style="text-align: right;">5.750000</td>
<td style="text-align: right;">1.5000000</td>
<td style="text-align: right;">8.600000</td>
<td style="text-align: right;">6.875000</td>
<td style="text-align: right;">4.857143</td>
<td style="text-align: right;">3.625000</td>
<td style="text-align: right;">6.200000</td>
<td style="text-align: right;">3.0000000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">6.666666</td>
<td style="text-align: right;">8.250000</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.833333</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.857142</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">8.571428</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">3.500000</td>
<td style="text-align: right;">5.250000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">1.7777778</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">4.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Netherlands</td>
<td style="text-align: right;">1016</td>
<td style="text-align: left;">CU</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.04</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.89</td>
<td style="text-align: right;">4.583334</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">1.600000</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">6.916666</td>
<td style="text-align: right;">1.5714285</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">4.583334</td>
<td style="text-align: right;">4.250000</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">3.1666667</td>
<td style="text-align: right;">5.272728</td>
<td style="text-align: right;">5.222222</td>
<td style="text-align: right;">4.111111</td>
<td style="text-align: right;">4.666666</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">4.7500000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">4.000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.200000</td>
<td style="text-align: right;">4.600000</td>
<td style="text-align: right;">6.200000</td>
<td style="text-align: right;">5.400000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">1.600000</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">0.8888889</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">3.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Finland</td>
<td style="text-align: right;">1409</td>
<td style="text-align: left;">KD</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">5.111111</td>
<td style="text-align: right;">3.142857</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">4.200000</td>
<td style="text-align: right;">5.818182</td>
<td style="text-align: right;">8.818182</td>
<td style="text-align: right;">2.2000000</td>
<td style="text-align: right;">1.333333</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">7.545454</td>
<td style="text-align: right;">7.181818</td>
<td style="text-align: right;">4.909091</td>
<td style="text-align: right;">2.4000001</td>
<td style="text-align: right;">8.090909</td>
<td style="text-align: right;">4.800000</td>
<td style="text-align: right;">5.700000</td>
<td style="text-align: right;">5.090909</td>
<td style="text-align: right;">6.400000</td>
<td style="text-align: right;">3.5999999</td>
<td style="text-align: right;">5.800000</td>
<td style="text-align: right;">3.800</td>
<td style="text-align: right;">6.875000</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">6.500000</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">9.400000</td>
<td style="text-align: right;">6.833334</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">5.833334</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">5.428571</td>
<td style="text-align: right;">3.600000</td>
<td style="text-align: right;">3.400000</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">2.25</td>
<td style="text-align: right;">2.2857144</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">3.750000</td>
<td style="text-align: right;">1.75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Turkey</td>
<td style="text-align: right;">3416</td>
<td style="text-align: left;">YRP</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.81</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.250000</td>
<td style="text-align: right;">1.538462</td>
<td style="text-align: right;">0.200000</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">6.166666</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">0.800000</td>
<td style="text-align: right;">6.785714</td>
<td style="text-align: right;">9.785714</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">1.250000</td>
<td style="text-align: right;">8.714286</td>
<td style="text-align: right;">9.142858</td>
<td style="text-align: right;">6.750000</td>
<td style="text-align: right;">6.307692</td>
<td style="text-align: right;">1.9090909</td>
<td style="text-align: right;">7.416666</td>
<td style="text-align: right;">7.416666</td>
<td style="text-align: right;">4.428571</td>
<td style="text-align: right;">5.461538</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">0.6666667</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">2.375</td>
<td style="text-align: right;">3.875000</td>
<td style="text-align: right;">4.500000</td>
<td style="text-align: right;">8.285714</td>
<td style="text-align: right;">9.285714</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">7.500000</td>
<td style="text-align: right;">8.571428</td>
<td style="text-align: right;">5.428571</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">8.666667</td>
<td style="text-align: right;">6.833334</td>
<td style="text-align: right;">4.75</td>
<td style="text-align: right;">7.333334</td>
<td style="text-align: right;">2.40</td>
<td style="text-align: right;">7.8571429</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Switzerland</td>
<td style="text-align: right;">3607</td>
<td style="text-align: left;">EVP/PEV</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1.95</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.900000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">5.090909</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.428571</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">0.6666667</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">7.900000</td>
<td style="text-align: right;">5.636363</td>
<td style="text-align: right;">4.750000</td>
<td style="text-align: right;">2.833333</td>
<td style="text-align: right;">2.4000001</td>
<td style="text-align: right;">7.375000</td>
<td style="text-align: right;">5.600000</td>
<td style="text-align: right;">4.111111</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">4.0000000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">6.000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.400000</td>
<td style="text-align: right;">8.333333</td>
<td style="text-align: right;">6.800000</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">8.285714</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">6.600000</td>
<td style="text-align: right;">6.250000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.500000</td>
<td style="text-align: right;">1.750000</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">8.20</td>
<td style="text-align: right;">1.3333334</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Switzerland</td>
<td style="text-align: right;">3608</td>
<td style="text-align: left;">EDU/UDF</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1.23</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.833333</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">7.222222</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.571429</td>
<td style="text-align: right;">9.250000</td>
<td style="text-align: right;">0.3333333</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">8.700000</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">8.636364</td>
<td style="text-align: right;">6.888889</td>
<td style="text-align: right;">0.8571429</td>
<td style="text-align: right;">8.727273</td>
<td style="text-align: right;">7.714286</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">3.600000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.6666667</td>
<td style="text-align: right;">7.666666</td>
<td style="text-align: right;">3.000</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.833333</td>
<td style="text-align: right;">8.714286</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">2.50</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">9.20</td>
<td style="text-align: right;">4.0000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># OR:</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ches |&gt; subset(family=="Confessional")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Another option we’ll explore more in the future is the <code>filter</code> argument from the dplyr library. The syntax for this is almost identical to the syntax for <code>subset</code>, and it also takes a dataset as its first argument:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">|&gt;</span><span class="fu">filter</span>(family<span class="sc">==</span><span class="st">"Confessional"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">party_id</th>
<th style="text-align: left;">party</th>
<th style="text-align: left;">family</th>
<th style="text-align: right;">electionyear</th>
<th style="text-align: right;">vote</th>
<th style="text-align: right;">seat</th>
<th style="text-align: right;">epvote</th>
<th style="text-align: right;">eu_position</th>
<th style="text-align: right;">eu_salience</th>
<th style="text-align: right;">eu_dissent</th>
<th style="text-align: right;">eu_blur</th>
<th style="text-align: right;">lrecon</th>
<th style="text-align: right;">lrecon_blur</th>
<th style="text-align: right;">lrecon_dissent</th>
<th style="text-align: right;">lrecon_salience</th>
<th style="text-align: right;">galtan</th>
<th style="text-align: right;">galtan_blur</th>
<th style="text-align: right;">galtan_dissent</th>
<th style="text-align: right;">galtan_salience</th>
<th style="text-align: right;">lrgen</th>
<th style="text-align: right;">immigrate_policy</th>
<th style="text-align: right;">immigrate_salience</th>
<th style="text-align: right;">immigrate_dissent</th>
<th style="text-align: right;">multiculturalism</th>
<th style="text-align: right;">multicult_salience</th>
<th style="text-align: right;">redistribution</th>
<th style="text-align: right;">redist_salience</th>
<th style="text-align: right;">climate_change</th>
<th style="text-align: right;">climate_change_salience</th>
<th style="text-align: right;">environment</th>
<th style="text-align: right;">environment_salience</th>
<th style="text-align: right;">spendvtax</th>
<th style="text-align: right;">deregulation</th>
<th style="text-align: right;">civlib_laworder</th>
<th style="text-align: right;">womens_rights</th>
<th style="text-align: right;">lgbtq_rights</th>
<th style="text-align: right;">samesex_marriage</th>
<th style="text-align: right;">religious_principles</th>
<th style="text-align: right;">ethnic_minorities</th>
<th style="text-align: right;">nationalism</th>
<th style="text-align: right;">urban_rural</th>
<th style="text-align: right;">protectionism</th>
<th style="text-align: right;">regions</th>
<th style="text-align: right;">executive_power</th>
<th style="text-align: right;">judicial_independence</th>
<th style="text-align: right;">corrupt_salience</th>
<th style="text-align: right;">anti_islam</th>
<th style="text-align: right;">people_v_elite</th>
<th style="text-align: right;">anti_elite_salience</th>
<th style="text-align: right;">eu_foreign</th>
<th style="text-align: right;">eu_intmark</th>
<th style="text-align: right;">eu_russia</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Greece</td>
<td style="text-align: right;">419</td>
<td style="text-align: left;">Niki</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4.37</td>
<td style="text-align: right;">2.777778</td>
<td style="text-align: right;">3.555556</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">6.4</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">6.250000</td>
<td style="text-align: right;">1.500000</td>
<td style="text-align: right;">2.833333</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">0.2500000</td>
<td style="text-align: right;">1.166667</td>
<td style="text-align: right;">9.300000</td>
<td style="text-align: right;">9.200000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.888889</td>
<td style="text-align: right;">0.3333333</td>
<td style="text-align: right;">9.625000</td>
<td style="text-align: right;">7.375000</td>
<td style="text-align: right;">5.750000</td>
<td style="text-align: right;">2.600000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">1.3333334</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">9.200000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">9.600000</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.714286</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">7.500000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.50</td>
<td style="text-align: right;">6.666666</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">8.5000000</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">9.50</td>
</tr>
<tr class="even">
<td style="text-align: left;">Netherlands</td>
<td style="text-align: right;">1006</td>
<td style="text-align: left;">SGP</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.08</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.70</td>
<td style="text-align: right;">2.750000</td>
<td style="text-align: right;">3.454546</td>
<td style="text-align: right;">2.250000</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">2.333333</td>
<td style="text-align: right;">4.083334</td>
<td style="text-align: right;">9.416667</td>
<td style="text-align: right;">0.3750000</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">8.666667</td>
<td style="text-align: right;">5.750000</td>
<td style="text-align: right;">1.5000000</td>
<td style="text-align: right;">8.600000</td>
<td style="text-align: right;">6.875000</td>
<td style="text-align: right;">4.857143</td>
<td style="text-align: right;">3.625000</td>
<td style="text-align: right;">6.200000</td>
<td style="text-align: right;">3.0000000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">6.666666</td>
<td style="text-align: right;">8.250000</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.833333</td>
<td style="text-align: right;">9.800000</td>
<td style="text-align: right;">9.857142</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">8.571428</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">3.500000</td>
<td style="text-align: right;">5.250000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">1.7777778</td>
<td style="text-align: right;">1.5</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">4.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Netherlands</td>
<td style="text-align: right;">1016</td>
<td style="text-align: left;">CU</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.04</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2.89</td>
<td style="text-align: right;">4.583334</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">1.600000</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">6.916666</td>
<td style="text-align: right;">1.5714285</td>
<td style="text-align: right;">2.500000</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">4.583334</td>
<td style="text-align: right;">4.250000</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">3.1666667</td>
<td style="text-align: right;">5.272728</td>
<td style="text-align: right;">5.222222</td>
<td style="text-align: right;">4.111111</td>
<td style="text-align: right;">4.666666</td>
<td style="text-align: right;">3.000000</td>
<td style="text-align: right;">4.7500000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">4.000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.200000</td>
<td style="text-align: right;">4.600000</td>
<td style="text-align: right;">6.200000</td>
<td style="text-align: right;">5.400000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">1.600000</td>
<td style="text-align: right;">0.500000</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">2.666667</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">0.8888889</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">3.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Finland</td>
<td style="text-align: right;">1409</td>
<td style="text-align: left;">KD</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">4.20</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4.12</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">5.111111</td>
<td style="text-align: right;">3.142857</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">5.166666</td>
<td style="text-align: right;">4.200000</td>
<td style="text-align: right;">5.818182</td>
<td style="text-align: right;">8.818182</td>
<td style="text-align: right;">2.2000000</td>
<td style="text-align: right;">1.333333</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">7.545454</td>
<td style="text-align: right;">7.181818</td>
<td style="text-align: right;">4.909091</td>
<td style="text-align: right;">2.4000001</td>
<td style="text-align: right;">8.090909</td>
<td style="text-align: right;">4.800000</td>
<td style="text-align: right;">5.700000</td>
<td style="text-align: right;">5.090909</td>
<td style="text-align: right;">6.400000</td>
<td style="text-align: right;">3.5999999</td>
<td style="text-align: right;">5.800000</td>
<td style="text-align: right;">3.800</td>
<td style="text-align: right;">6.875000</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">6.500000</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">9.400000</td>
<td style="text-align: right;">6.833334</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">5.833334</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">5.428571</td>
<td style="text-align: right;">3.600000</td>
<td style="text-align: right;">3.400000</td>
<td style="text-align: right;">6.00</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">2.25</td>
<td style="text-align: right;">2.2857144</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">3.750000</td>
<td style="text-align: right;">1.75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Turkey</td>
<td style="text-align: right;">3416</td>
<td style="text-align: left;">YRP</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2.81</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.250000</td>
<td style="text-align: right;">1.538462</td>
<td style="text-align: right;">0.200000</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">6.166666</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">0.800000</td>
<td style="text-align: right;">6.785714</td>
<td style="text-align: right;">9.785714</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">1.250000</td>
<td style="text-align: right;">8.714286</td>
<td style="text-align: right;">9.142858</td>
<td style="text-align: right;">6.750000</td>
<td style="text-align: right;">6.307692</td>
<td style="text-align: right;">1.9090909</td>
<td style="text-align: right;">7.416666</td>
<td style="text-align: right;">7.416666</td>
<td style="text-align: right;">4.428571</td>
<td style="text-align: right;">5.461538</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">0.6666667</td>
<td style="text-align: right;">6.333334</td>
<td style="text-align: right;">2.375</td>
<td style="text-align: right;">3.875000</td>
<td style="text-align: right;">4.500000</td>
<td style="text-align: right;">8.285714</td>
<td style="text-align: right;">9.285714</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">10.000000</td>
<td style="text-align: right;">7.500000</td>
<td style="text-align: right;">8.571428</td>
<td style="text-align: right;">5.428571</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">8.666667</td>
<td style="text-align: right;">6.833334</td>
<td style="text-align: right;">4.75</td>
<td style="text-align: right;">7.333334</td>
<td style="text-align: right;">2.40</td>
<td style="text-align: right;">7.8571429</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Switzerland</td>
<td style="text-align: right;">3607</td>
<td style="text-align: left;">EVP/PEV</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1.95</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.900000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: right;">5.090909</td>
<td style="text-align: right;">5.000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.428571</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">0.6666667</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">7.900000</td>
<td style="text-align: right;">5.636363</td>
<td style="text-align: right;">4.750000</td>
<td style="text-align: right;">2.833333</td>
<td style="text-align: right;">2.4000001</td>
<td style="text-align: right;">7.375000</td>
<td style="text-align: right;">5.600000</td>
<td style="text-align: right;">4.111111</td>
<td style="text-align: right;">4.333334</td>
<td style="text-align: right;">5.333334</td>
<td style="text-align: right;">4.0000000</td>
<td style="text-align: right;">3.800000</td>
<td style="text-align: right;">6.000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">4.400000</td>
<td style="text-align: right;">8.333333</td>
<td style="text-align: right;">6.800000</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">8.285714</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">6.600000</td>
<td style="text-align: right;">6.250000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">4.500000</td>
<td style="text-align: right;">1.750000</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">8.20</td>
<td style="text-align: right;">1.3333334</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Switzerland</td>
<td style="text-align: right;">3608</td>
<td style="text-align: left;">EDU/UDF</td>
<td style="text-align: left;">Confessional</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1.23</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1.833333</td>
<td style="text-align: right;">4.000000</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">3.0</td>
<td style="text-align: right;">7.222222</td>
<td style="text-align: right;">5.666666</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">3.571429</td>
<td style="text-align: right;">9.250000</td>
<td style="text-align: right;">0.3333333</td>
<td style="text-align: right;">1.000000</td>
<td style="text-align: right;">8.700000</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">8.636364</td>
<td style="text-align: right;">6.888889</td>
<td style="text-align: right;">0.8571429</td>
<td style="text-align: right;">8.727273</td>
<td style="text-align: right;">7.714286</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">3.600000</td>
<td style="text-align: right;">6.000000</td>
<td style="text-align: right;">2.6666667</td>
<td style="text-align: right;">7.666666</td>
<td style="text-align: right;">3.000</td>
<td style="text-align: right;">7.250000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">9.500000</td>
<td style="text-align: right;">8.833333</td>
<td style="text-align: right;">8.714286</td>
<td style="text-align: right;">8.750000</td>
<td style="text-align: right;">9.000000</td>
<td style="text-align: right;">7.200000</td>
<td style="text-align: right;">8.000000</td>
<td style="text-align: right;">3.666667</td>
<td style="text-align: right;">7.000000</td>
<td style="text-align: right;">3.333333</td>
<td style="text-align: right;">2.50</td>
<td style="text-align: right;">2.000000</td>
<td style="text-align: right;">9.20</td>
<td style="text-align: right;">4.0000000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<section id="q5" class="level2">
<h2 class="anchored" data-anchor-id="q5">Q5</h2>
<p>Use one of the sub-setting operations above to create a subset of the CHES data that only includes parties that received at least 10% of the vote in the last election:</p>
</section>
</section>
<section id="frequency-tables" class="level1">
<h1>Frequency tables</h1>
<p>R’s <code>table</code> command will generate either one or two-dimensional frequency tables.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ches<span class="sc">$</span>family)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
       Radical Right        Conservatives              Liberal 
                  48                   26                   46 
Christian-Democratic            Socialist         Radical Left 
                  17                   38                   26 
               Green          Regionalist            No family 
                  31                   22                   11 
        Confessional      Agrarian/Center 
                   7                    7 </code></pre>
</div>
</div>
<p>In some cases, it may be more useful to examine the percentages in each group, rather than the raw frequencies. You can use the <code>prop.table</code> function to generate proportions from an existing table object.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>table_of_families<span class="ot">&lt;-</span><span class="fu">table</span>(ches<span class="sc">$</span>family)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(table_of_families)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
       Radical Right        Conservatives              Liberal 
          0.17204301           0.09318996           0.16487455 
Christian-Democratic            Socialist         Radical Left 
          0.06093190           0.13620072           0.09318996 
               Green          Regionalist            No family 
          0.11111111           0.07885305           0.03942652 
        Confessional      Agrarian/Center 
          0.02508961           0.02508961 </code></pre>
</div>
</div>
</section>
<section id="crosstabs" class="level1">
<h1>Crosstabs</h1>
<p>Adding a second categorical variable to the table function will generate a cross tab. The first group will be presented in the rows, and the second group in the columns. In this example, I’m creating a new variable called <code>radical_right</code> that is TRUE if a given party is part of the radical right family. Then I’m creating a cross tab that allows me to see how many radical right parties held seats based on the year in which the election occurred:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>radical_right <span class="ot">&lt;-</span>  ches<span class="sc">$</span>family <span class="sc">==</span> <span class="st">"Radical Right"</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ches<span class="sc">$</span>electionyear, ches<span class="sc">$</span>radical_right)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      
       FALSE TRUE
  2021    39    5
  2022    41   10
  2023    80   17
  2024    71   16</code></pre>
</div>
</div>
<p>In many cases, I’m interested in getting percentages rather than just raw frequencies. I can use the <code>prop.table</code> function to get proportions from a frequency table. By default, <code>prop.table</code> will just give the cell percentages:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>rr_table<span class="ot">&lt;-</span><span class="fu">table</span>(ches<span class="sc">$</span>electionyear, ches<span class="sc">$</span>radical_right)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(rr_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      
            FALSE       TRUE
  2021 0.13978495 0.01792115
  2022 0.14695341 0.03584229
  2023 0.28673835 0.06093190
  2024 0.25448029 0.05734767</code></pre>
</div>
</div>
<p>…But this isn’t always a useful metric. More often, we’ll want to use a cross tab to answer a question like “what percentage of people in group X have characteristic Y?” For instance: “what percentage of parties in a countries parliament were from the radical right family” To answer this question, I’ll need to calculate:</p>
<p><span class="math display">\[
\frac{\text{Number of rad right wing parties in the data for year i}}{\text{Total number of parties in year i}}
\]</span></p>
<section id="q6" class="level2">
<h2 class="anchored" data-anchor-id="q6">Q6</h2>
<p>Use <code>table</code> and <code>prop.table</code> function to calculate the proportion of radical right parties in each country’s parliament. You’ll want to look at the <code>help</code> file for the function to figure out how to do this.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Enter your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="the-janitor-package" class="level1">
<h1>The Janitor package</h1>
<p>There are a number of packages that (ostensibly) help you make nicer looking cross tabs that can be easily exported to a report. Its worth exploring these to see which ones are most useful for you, but one I want to highlight is <a href="https://cran.r-project.org/web/packages/janitor/vignettes/tabyls.html">the janitor package</a>, which allows you to use the <code>tabyl</code> command to create tables:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">tabyl</span>(<span class="at">dat=</span>ches, <span class="at">var1=</span>electionyear, <span class="at">var2=</span>radical_right)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>t1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">electionyear</th>
<th style="text-align: right;">FALSE</th>
<th style="text-align: right;">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2021</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">2022</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2023</td>
<td style="text-align: right;">80</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: right;">2024</td>
<td style="text-align: right;">71</td>
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>On its own, this isn’t much to write home about, but it provides a lot of nice options for <code>adorning</code> the table with additional statistics:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>t1<span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"row"</span>)<span class="sc">|&gt;</span> <span class="co"># add totals</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>)<span class="sc">|&gt;</span> <span class="co"># calculate percentages</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="co"># format percentages</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">electionyear</th>
<th style="text-align: left;">FALSE</th>
<th style="text-align: left;">TRUE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2021</td>
<td style="text-align: left;">88.6%</td>
<td style="text-align: left;">11.4%</td>
</tr>
<tr class="even">
<td style="text-align: left;">2022</td>
<td style="text-align: left;">80.4%</td>
<td style="text-align: left;">19.6%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2023</td>
<td style="text-align: left;">82.5%</td>
<td style="text-align: left;">17.5%</td>
</tr>
<tr class="even">
<td style="text-align: left;">2024</td>
<td style="text-align: left;">81.6%</td>
<td style="text-align: left;">18.4%</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Total</td>
<td style="text-align: left;">82.8%</td>
<td style="text-align: left;">17.2%</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R-Packages for presentation-ready tables
</div>
</div>
<div class="callout-body-container callout-body">
<p>The janitor package has the advantage of having relatively simple syntax, which makes it great for exploring a data set. However, if you’re looking to include cross tabs in a report or presentation you may want to consider one of the R packages that can create more aesthetically pleasing tables. For this you might want to consider <a href="https://gt.rstudio.com/"><code>gt</code></a>, <a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html"><code>kableExtra</code></a>, or the <a href="https://modelsummary.com/"><code>modelsummary</code></a> package.</p>
</div>
</div>
</section>
<section id="aggregation-and-grouping" class="level1">
<h1>Aggregation and grouping</h1>
<p>We can use <code>aggregate</code> to apply a function to each level of a categorical variable. To do this we’ll use R’s <a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Formulae-for-statistical-models">formula syntax</a>, which in general will look something like this:</p>
<pre><code>y ~ x
</code></pre>
<p>The variable on the left will be the outcome measure you’re aggregating, the variable on the right will be the category you’re aggregating over. So, if we want to get the average level of corruption salience in each country, we can run this:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># x = the formula, </span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># FUN= should be a function you want to run for each group</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>corruption_salience <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">x =</span> corrupt_salience <span class="sc">~</span> country , </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">FUN =</span> mean, </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">data =</span> ches )</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>corruption_salience</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">corrupt_salience</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Belgium</td>
<td style="text-align: right;">0.4583333</td>
</tr>
<tr class="even">
<td style="text-align: left;">Denmark</td>
<td style="text-align: right;">2.6166666</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Germany</td>
<td style="text-align: right;">4.2949736</td>
</tr>
<tr class="even">
<td style="text-align: left;">Greece</td>
<td style="text-align: right;">5.5648148</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Spain</td>
<td style="text-align: right;">4.7142857</td>
</tr>
<tr class="even">
<td style="text-align: left;">France</td>
<td style="text-align: right;">2.6000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ireland</td>
<td style="text-align: right;">4.9541667</td>
</tr>
<tr class="even">
<td style="text-align: left;">Italy</td>
<td style="text-align: right;">5.1000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Netherlands</td>
<td style="text-align: right;">1.6666667</td>
</tr>
<tr class="even">
<td style="text-align: left;">United Kingdom</td>
<td style="text-align: right;">5.8261905</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Portugal</td>
<td style="text-align: right;">8.3333333</td>
</tr>
<tr class="even">
<td style="text-align: left;">Austria</td>
<td style="text-align: right;">6.0400000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Finland</td>
<td style="text-align: right;">6.7222222</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sweden</td>
<td style="text-align: right;">1.8055556</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bulgaria</td>
<td style="text-align: right;">5.8909091</td>
</tr>
<tr class="even">
<td style="text-align: left;">Czech Republic</td>
<td style="text-align: right;">5.1817198</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Estonia</td>
<td style="text-align: right;">6.8750000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hungary</td>
<td style="text-align: right;">6.6871693</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Latvia</td>
<td style="text-align: right;">5.3833334</td>
</tr>
<tr class="even">
<td style="text-align: left;">Lithuania</td>
<td style="text-align: right;">5.5749999</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Poland</td>
<td style="text-align: right;">6.3730159</td>
</tr>
<tr class="even">
<td style="text-align: left;">Romania</td>
<td style="text-align: right;">4.8809524</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Slovakia</td>
<td style="text-align: right;">5.0462963</td>
</tr>
<tr class="even">
<td style="text-align: left;">Slovenia</td>
<td style="text-align: right;">6.7708334</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Croatia</td>
<td style="text-align: right;">6.8556547</td>
</tr>
<tr class="even">
<td style="text-align: left;">Turkey</td>
<td style="text-align: right;">6.3571429</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Norway</td>
<td style="text-align: right;">2.2777778</td>
</tr>
<tr class="even">
<td style="text-align: left;">Switzerland</td>
<td style="text-align: right;">1.9880952</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Iceland</td>
<td style="text-align: right;">4.5000000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<section id="dplyr-method" class="level2">
<h2 class="anchored" data-anchor-id="dplyr-method">dplyr method:</h2>
<p>There’s also a <code>dplyr</code> method for this, that may be a little easier to parse. Here, we just use “group by” to declare grouping variable, and then use “summarize” to summarize over members of each group.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># if you haven't already loaded dplyr</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>newtable<span class="ot">&lt;-</span>ches<span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country)<span class="sc">|&gt;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_corruption_salience=</span> <span class="fu">mean</span>(corrupt_salience))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Going forward, we’ll mostly use the <code>dplyr</code> commands for this class, but knowing <code>aggregate</code> can be useful for interpreting other people’s code.</p>
</section>
<section id="q7" class="level2">
<h2 class="anchored" data-anchor-id="q7">Q7</h2>
<p>Use either the <code>dplyr</code> commands or <code>aggregate</code> to get each party family’s average position on redistribution issues.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># your code here....</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="functions" class="level1">
<h1>Functions</h1>
<p>Remember that R functions are just snippets of code that we can re-use. If I have done a calculation once, I can probably write a function to apply it to more general cases.</p>
<p>For instance, here’s some code that I could use to get the top parties by vote share:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this gives row number for the highest to lowest value</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>top_n<span class="ot">&lt;-</span><span class="fu">order</span>(ches<span class="sc">$</span>vote, <span class="at">decreasing=</span>T)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># this subsets the values of party by the index in top_n:</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>party[top_n]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "PL"          "PN"          "ND"          "RN"          "AKP"        
 [6] "PiS"         "GS"          "HDZ"         "Fidesz-KDNP" "LAB"        </code></pre>
</div>
</div>
<p>I could probably make this more generalized by creating a function.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>topnFunction <span class="ot">&lt;-</span> <span class="cf">function</span>(labels, values, n){ <span class="co"># the arguments </span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  top_n <span class="ot">&lt;-</span> <span class="fu">order</span>(values, <span class="at">decreasing=</span> T)[<span class="dv">1</span><span class="sc">:</span>n] <span class="co"># the subset</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  result<span class="ot">&lt;-</span>labels[top_n] <span class="co"># the result  </span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result) <span class="co"># the return statement</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now I can use this in a bunch of different scenarios. Maybe I want to get the top parties by seat share instead of vote share, then all I need to do is change the <code>values</code> argument:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topnFunction</span>(ches<span class="sc">$</span>party, ches<span class="sc">$</span>seat, <span class="at">n=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "LAB" "AKP" "SPD" "PiS" "CHP" "PO"  "CDU" "ND"  "RN"  "PP" </code></pre>
</div>
</div>
<p>Or I can get more observations by changing <code>n</code></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topnFunction</span>(ches<span class="sc">$</span>party, ches<span class="sc">$</span>seat, <span class="at">n=</span><span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "LAB"         "AKP"         "SPD"         "PiS"         "CHP"        
 [6] "PO"          "CDU"         "ND"          "RN"          "PP"         
[11] "Fidesz-KDNP" "PSOE"        "CONS"        "FDI"         "Grunen"     </code></pre>
</div>
</div>
<section id="q8" class="level2">
<h2 class="anchored" data-anchor-id="q8">Q8</h2>
<p>How could I modify the function above to return both the party names and the values themselves?</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#...your code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb47" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Classwork 1: Indexing and subsetting"</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co">    df-print: kable</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, fig.align = "center")</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>This document was created using <span class="co">[</span><span class="ot">Quarto</span><span class="co">](https://quarto.org/docs/get-started/hello/rstudio.html)</span> a sort of language for combining code and text. When you're following along in class, you can either copy-paste code directly from this page into an R-studio script file, or you can go over to the github site for this class, download the .qmd file for this classwork and then open it in R-studio and work with it as an interactive document.</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data and packages</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>You'll want to start by loading the CHES data. We can do this using the <span class="in">`read_csv`</span> function from the readr package. We *could* access this data set by downloading it from the <span class="co">[</span><span class="ot">CHES website</span><span class="co">](https://www.chesdata.eu/)</span> and then importing it from a local file, but for <span class="in">`.csv`</span> files like this one, we can actually download it by putting the web address directly in to our function in quotation marks:</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>ches<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">'https://www.chesdata.eu/s/CHES_2024_final_v2.csv'</span>)</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>After you've imported the data, take a second to <span class="in">`View()`</span> the data frame you just imported and see how things are coded. </span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>Note that in the raw csv data, the party family variable is initially a set of numbers instead of a text value.</span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>family[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a> In order to convert these to text, we'll need to <span class="co">[</span><span class="ot">consult the codebook</span><span class="co">](https://static1.squarespace.com/static/5975c9bfdb29d6a05c65209b/t/6881094b92e5c57f83d73e8f/1753286987723/CHES+2024+Codebook.pdf)</span> and then convert the numeric variables to their respective text values.</span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>R has a special built-in data type for this exact scenario called a "factor variable". </span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a>::: {.column-margin}</span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>R factors are often a source of confusion for new users. Under the hood, a factor variable is just a set of numbers with an extra piece of data that maps those numeric values to text labels. We could also store variables like this as regular text values, but factor variables are helpful because they can make it easier to do things like fix the ordering of survey response items when we're making a graph or table.</span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>We'll talk more about working with factors later on, but for now it's sufficient to know that we're doing this to turn the numbers into readable text:</span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>labels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Radical Right"</span>,</span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Conservatives"</span>,</span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Liberal"</span>, </span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Christian-Democratic"</span>,</span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Socialist"</span>,</span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Radical Left"</span>,</span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Green"</span>, </span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Regionalist"</span>, </span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>          <span class="st">"No family"</span>,</span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Confessional"</span>,</span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Agrarian/Center"</span>)</span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>family<span class="ot">&lt;-</span><span class="fu">factor</span>(ches<span class="sc">$</span>family, <span class="at">labels=</span>labels)</span>
<span id="cb47-73"><a href="#cb47-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-74"><a href="#cb47-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-77"><a href="#cb47-77" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-78"><a href="#cb47-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-80"><a href="#cb47-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-81"><a href="#cb47-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-82"><a href="#cb47-82" aria-hidden="true" tabindex="-1"></a>We'll do the same thing for the "country" variable: </span>
<span id="cb47-83"><a href="#cb47-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-86"><a href="#cb47-86" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-87"><a href="#cb47-87" aria-hidden="true" tabindex="-1"></a>country_levels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">16</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, </span>
<span id="cb47-88"><a href="#cb47-88" aria-hidden="true" tabindex="-1"></a>          <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">31</span>, <span class="dv">34</span>, <span class="dv">35</span>, <span class="dv">36</span>, <span class="dv">37</span>, <span class="dv">38</span>, <span class="dv">40</span>, <span class="dv">45</span>)</span>
<span id="cb47-89"><a href="#cb47-89" aria-hidden="true" tabindex="-1"></a>country_labels<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"Belgium"</span>, <span class="st">"Denmark"</span>, <span class="st">"Germany"</span>, <span class="st">"Greece"</span>, <span class="st">"Spain"</span>, <span class="st">"France"</span>, </span>
<span id="cb47-90"><a href="#cb47-90" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Ireland"</span>, <span class="st">"Italy"</span>, <span class="st">"Netherlands"</span>,  <span class="st">"United Kingdom"</span>, <span class="st">"Portugal"</span>, </span>
<span id="cb47-91"><a href="#cb47-91" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Austria"</span>, <span class="st">"Finland"</span>, <span class="st">"Sweden"</span>, <span class="st">"Bulgaria"</span>, <span class="st">"Czech Republic"</span>,  </span>
<span id="cb47-92"><a href="#cb47-92" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Estonia"</span>, <span class="st">"Hungary"</span>, <span class="st">"Latvia"</span>, <span class="st">"Lithuania"</span>,<span class="st">"Poland"</span>, <span class="st">"Romania"</span>, </span>
<span id="cb47-93"><a href="#cb47-93" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Slovakia"</span>, <span class="st">"Slovenia"</span>, <span class="st">"Croatia"</span>, <span class="st">"Turkey"</span>, <span class="st">"Norway"</span>, <span class="st">"Switzerland"</span>, </span>
<span id="cb47-94"><a href="#cb47-94" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Malta"</span>, <span class="st">"Luxembourg"</span>, <span class="st">"Cyprus"</span>, <span class="st">"Iceland"</span>)</span>
<span id="cb47-95"><a href="#cb47-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-96"><a href="#cb47-96" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>country<span class="ot">&lt;-</span><span class="fu">factor</span>(ches<span class="sc">$</span>country, <span class="at">levels=</span>country_levels, <span class="at">labels=</span>country_labels)</span>
<span id="cb47-97"><a href="#cb47-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-98"><a href="#cb47-98" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-99"><a href="#cb47-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-100"><a href="#cb47-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-101"><a href="#cb47-101" aria-hidden="true" tabindex="-1"></a>Take a minute to <span class="in">`View()`</span> the data set and see how things are coded now.</span>
<span id="cb47-102"><a href="#cb47-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-103"><a href="#cb47-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-104"><a href="#cb47-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-105"><a href="#cb47-105" aria-hidden="true" tabindex="-1"></a><span class="fu"># Using a pipe</span></span>
<span id="cb47-106"><a href="#cb47-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-107"><a href="#cb47-107" aria-hidden="true" tabindex="-1"></a>A lot of code you'll see in this course will use the "pipe" operator. Pipes are a way of making code more readable by chaining together a set of operations so that they read from left to right. </span>
<span id="cb47-108"><a href="#cb47-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-109"><a href="#cb47-109" aria-hidden="true" tabindex="-1"></a>Consider a script that creates 100 random numbers, exponentiates them, sorts them from highest to lowest, and then plots the result. One way to do this would be with a set of nested commands like this: </span>
<span id="cb47-110"><a href="#cb47-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-113"><a href="#cb47-113" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-114"><a href="#cb47-114" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">100</span>)</span>
<span id="cb47-115"><a href="#cb47-115" aria-hidden="true" tabindex="-1"></a><span class="co"># get 100 samples from a normal distribution with mean zero and sd =1 and plot them</span></span>
<span id="cb47-116"><a href="#cb47-116" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">sort</span>(<span class="fu">exp</span>(<span class="fu">rnorm</span>(<span class="dv">100</span>))))</span>
<span id="cb47-117"><a href="#cb47-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-118"><a href="#cb47-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-119"><a href="#cb47-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-120"><a href="#cb47-120" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-121"><a href="#cb47-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-122"><a href="#cb47-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-123"><a href="#cb47-123" aria-hidden="true" tabindex="-1"></a>Alternatively, we could write each step on a separate line and assign the results to a new variable:</span>
<span id="cb47-124"><a href="#cb47-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-125"><a href="#cb47-125" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, fig.height=4, fig.width=4}</span></span>
<span id="cb47-126"><a href="#cb47-126" aria-hidden="true" tabindex="-1"></a><span class="in">set.seed(100)</span></span>
<span id="cb47-127"><a href="#cb47-127" aria-hidden="true" tabindex="-1"></a><span class="in"># get 100 samples from a normal distribution with mean zero and sd =1 </span></span>
<span id="cb47-128"><a href="#cb47-128" aria-hidden="true" tabindex="-1"></a><span class="in">x&lt;-rnorm(100)</span></span>
<span id="cb47-129"><a href="#cb47-129" aria-hidden="true" tabindex="-1"></a><span class="in"># exponentiate it</span></span>
<span id="cb47-130"><a href="#cb47-130" aria-hidden="true" tabindex="-1"></a><span class="in">exp_x&lt;-exp(x)</span></span>
<span id="cb47-131"><a href="#cb47-131" aria-hidden="true" tabindex="-1"></a><span class="in"># sort it </span></span>
<span id="cb47-132"><a href="#cb47-132" aria-hidden="true" tabindex="-1"></a><span class="in">sorted_x&lt;-sort(exp_x)</span></span>
<span id="cb47-133"><a href="#cb47-133" aria-hidden="true" tabindex="-1"></a><span class="in"># plot the result</span></span>
<span id="cb47-134"><a href="#cb47-134" aria-hidden="true" tabindex="-1"></a><span class="in">plot(sorted_x)</span></span>
<span id="cb47-135"><a href="#cb47-135" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-136"><a href="#cb47-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-137"><a href="#cb47-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-138"><a href="#cb47-138" aria-hidden="true" tabindex="-1"></a>Using the pipe operator allows us to perform this same operation without the nested parentheses or the creation of intermediate variables: </span>
<span id="cb47-139"><a href="#cb47-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-140"><a href="#cb47-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, fig.height=4, fig.width=4}</span></span>
<span id="cb47-141"><a href="#cb47-141" aria-hidden="true" tabindex="-1"></a><span class="in">set.seed(100)</span></span>
<span id="cb47-142"><a href="#cb47-142" aria-hidden="true" tabindex="-1"></a><span class="in">rnorm(100)|&gt;</span></span>
<span id="cb47-143"><a href="#cb47-143" aria-hidden="true" tabindex="-1"></a><span class="in">  exp()|&gt;</span></span>
<span id="cb47-144"><a href="#cb47-144" aria-hidden="true" tabindex="-1"></a><span class="in">  sort()|&gt;</span></span>
<span id="cb47-145"><a href="#cb47-145" aria-hidden="true" tabindex="-1"></a><span class="in">  plot()</span></span>
<span id="cb47-146"><a href="#cb47-146" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb47-147"><a href="#cb47-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-148"><a href="#cb47-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-149"><a href="#cb47-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-150"><a href="#cb47-150" aria-hidden="true" tabindex="-1"></a>Note that the pipe command will default to using the left-hand-side object as the first argument for the right hand side, but you can explicitly reference the left-hand-side variable using the <span class="in">`_`</span>. This is especially useful for functions that don't take "data" as their first argument. One example of this is the <span class="in">`lm()`</span> command:</span>
<span id="cb47-151"><a href="#cb47-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-152"><a href="#cb47-152" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, error=TRUE}</span></span>
<span id="cb47-153"><a href="#cb47-153" aria-hidden="true" tabindex="-1"></a><span class="in"># This gives an error:</span></span>
<span id="cb47-154"><a href="#cb47-154" aria-hidden="true" tabindex="-1"></a><span class="in">ches|&gt;</span></span>
<span id="cb47-155"><a href="#cb47-155" aria-hidden="true" tabindex="-1"></a><span class="in">  lm(eu_position ~ immigrate_policy)</span></span>
<span id="cb47-156"><a href="#cb47-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-157"><a href="#cb47-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-158"><a href="#cb47-158" aria-hidden="true" tabindex="-1"></a><span class="in"># this works</span></span>
<span id="cb47-159"><a href="#cb47-159" aria-hidden="true" tabindex="-1"></a><span class="in">ches|&gt;</span></span>
<span id="cb47-160"><a href="#cb47-160" aria-hidden="true" tabindex="-1"></a><span class="in">  lm(eu_position ~ immigrate_policy, data=_)</span></span>
<span id="cb47-161"><a href="#cb47-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-162"><a href="#cb47-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-163"><a href="#cb47-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-164"><a href="#cb47-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-165"><a href="#cb47-165" aria-hidden="true" tabindex="-1"></a>The <span class="in">`%&gt;%`</span> is a version of the pipe that is associated with the <span class="in">`magrittr`</span> package. This *mostly* works just like the <span class="in">`|&gt;`</span> pipe that is part of base R, but it has some minor differences such as using <span class="in">`.`</span> instead of <span class="in">`_`</span> to reference data. (I mention it here because you might see it elsewhere, especially in code that pre-dates the introduction of a native pipe operator)</span>
<span id="cb47-166"><a href="#cb47-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-169"><a href="#cb47-169" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-170"><a href="#cb47-170" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb47-171"><a href="#cb47-171" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">%&gt;%</span></span>
<span id="cb47-172"><a href="#cb47-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(eu_position <span class="sc">~</span> immigrate_policy, <span class="at">data=</span>.)</span>
<span id="cb47-173"><a href="#cb47-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-174"><a href="#cb47-174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-175"><a href="#cb47-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-176"><a href="#cb47-176" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q1</span></span>
<span id="cb47-177"><a href="#cb47-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-178"><a href="#cb47-178" aria-hidden="true" tabindex="-1"></a>Restate the following operation using a sequence of pipes</span>
<span id="cb47-179"><a href="#cb47-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-182"><a href="#cb47-182" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-183"><a href="#cb47-183" aria-hidden="true" tabindex="-1"></a>chesfam<span class="ot">&lt;-</span><span class="fu">subset</span>(ches, <span class="at">select=</span>family) <span class="co"># retrieving only the families column</span></span>
<span id="cb47-184"><a href="#cb47-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-185"><a href="#cb47-185" aria-hidden="true" tabindex="-1"></a>chesfam<span class="ot">&lt;-</span><span class="fu">table</span>(chesfam) <span class="co"># creating a frequency table</span></span>
<span id="cb47-186"><a href="#cb47-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-187"><a href="#cb47-187" aria-hidden="true" tabindex="-1"></a>chesfam<span class="ot">&lt;-</span><span class="fu">sort</span>(chesfam) <span class="co"># sorting from lowest to highest</span></span>
<span id="cb47-188"><a href="#cb47-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-189"><a href="#cb47-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-190"><a href="#cb47-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-191"><a href="#cb47-191" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-192"><a href="#cb47-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-195"><a href="#cb47-195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-196"><a href="#cb47-196" aria-hidden="true" tabindex="-1"></a><span class="co"># type your code here...</span></span>
<span id="cb47-197"><a href="#cb47-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-198"><a href="#cb47-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-199"><a href="#cb47-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-200"><a href="#cb47-200" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q2</span></span>
<span id="cb47-201"><a href="#cb47-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-202"><a href="#cb47-202" aria-hidden="true" tabindex="-1"></a>Use one of the pipe operators to retrieve only the countries that are EU members (you'll want to use the <span class="in">`subset`</span> function for this)</span>
<span id="cb47-203"><a href="#cb47-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-206"><a href="#cb47-206" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-207"><a href="#cb47-207" aria-hidden="true" tabindex="-1"></a><span class="co"># type your code here...</span></span>
<span id="cb47-208"><a href="#cb47-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-209"><a href="#cb47-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-210"><a href="#cb47-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-211"><a href="#cb47-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-212"><a href="#cb47-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-213"><a href="#cb47-213" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q3</span></span>
<span id="cb47-214"><a href="#cb47-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-215"><a href="#cb47-215" aria-hidden="true" tabindex="-1"></a>Use the pipe operator to get the square root of the variance for <span class="in">`lrecon`</span> (which measures the left-right positioning for each party)</span>
<span id="cb47-216"><a href="#cb47-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-219"><a href="#cb47-219" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-220"><a href="#cb47-220" aria-hidden="true" tabindex="-1"></a><span class="co"># type your code here...</span></span>
<span id="cb47-221"><a href="#cb47-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-222"><a href="#cb47-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-223"><a href="#cb47-223" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-224"><a href="#cb47-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-225"><a href="#cb47-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-226"><a href="#cb47-226" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-227"><a href="#cb47-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-228"><a href="#cb47-228" aria-hidden="true" tabindex="-1"></a><span class="fu"># Subsetting</span></span>
<span id="cb47-229"><a href="#cb47-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-230"><a href="#cb47-230" aria-hidden="true" tabindex="-1"></a>Remember we have several options for sub-setting data sets. The most basic is by using a logical operator. For instance: the expression <span class="in">`ches$family=="Confessional"`</span> would return <span class="in">`TRUE`</span> for any element where the value of family was "Confessional" and <span class="in">`FALSE`</span> for any element where it didn't. Now I can use this logical vector to subset my data frame, returning all rows for confessional parties:</span>
<span id="cb47-231"><a href="#cb47-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-234"><a href="#cb47-234" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-235"><a href="#cb47-235" aria-hidden="true" tabindex="-1"></a>confessional_parties<span class="ot">&lt;-</span>ches[ches<span class="sc">$</span>family<span class="sc">==</span><span class="st">"Confessional"</span>, ]</span>
<span id="cb47-236"><a href="#cb47-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-237"><a href="#cb47-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-238"><a href="#cb47-238" aria-hidden="true" tabindex="-1"></a>confessional_parties</span>
<span id="cb47-239"><a href="#cb47-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-240"><a href="#cb47-240" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-241"><a href="#cb47-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-242"><a href="#cb47-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-243"><a href="#cb47-243" aria-hidden="true" tabindex="-1"></a>We can also chain together multiple logical expressions to get a more specific slice of the data. For instance, maybe I only want agrarian parties whose position on economic issues is greater than or equal to 5. I could get by combining two logical comparisons with an ampersand: </span>
<span id="cb47-244"><a href="#cb47-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-247"><a href="#cb47-247" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-248"><a href="#cb47-248" aria-hidden="true" tabindex="-1"></a>right_agrarians<span class="ot">&lt;-</span>ches[ches<span class="sc">$</span>family <span class="sc">==</span> <span class="st">"Agrarian/Center"</span> <span class="sc">&amp;</span> ches<span class="sc">$</span>lrecon<span class="sc">&gt;=</span><span class="dv">5</span>,]</span>
<span id="cb47-249"><a href="#cb47-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-250"><a href="#cb47-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-251"><a href="#cb47-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-252"><a href="#cb47-252" aria-hidden="true" tabindex="-1"></a>right_agrarians</span>
<span id="cb47-253"><a href="#cb47-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-254"><a href="#cb47-254" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-255"><a href="#cb47-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-256"><a href="#cb47-256" aria-hidden="true" tabindex="-1"></a>We can also use the <span class="in">`subset`</span> function to do the same operation above. Note that this function expects a data set as its first argument, and, once we've specified that, we can reference columns within that data set without needing to use the <span class="in">`$`</span> notation:</span>
<span id="cb47-257"><a href="#cb47-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-260"><a href="#cb47-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-261"><a href="#cb47-261" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(ches, family <span class="sc">==</span> <span class="st">"Confessional"</span>)</span>
<span id="cb47-262"><a href="#cb47-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-263"><a href="#cb47-263" aria-hidden="true" tabindex="-1"></a><span class="co"># OR:</span></span>
<span id="cb47-264"><a href="#cb47-264" aria-hidden="true" tabindex="-1"></a><span class="co"># ches |&gt; subset(family=="Confessional")</span></span>
<span id="cb47-265"><a href="#cb47-265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-266"><a href="#cb47-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-267"><a href="#cb47-267" aria-hidden="true" tabindex="-1"></a>Another option we'll explore more in the future is the <span class="in">`filter`</span> argument from the dplyr library. The syntax for this is almost identical to the syntax for <span class="in">`subset`</span>, and it also takes a dataset as its first argument:</span>
<span id="cb47-268"><a href="#cb47-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-271"><a href="#cb47-271" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-272"><a href="#cb47-272" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb47-273"><a href="#cb47-273" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">|&gt;</span><span class="fu">filter</span>(family<span class="sc">==</span><span class="st">"Confessional"</span>)</span>
<span id="cb47-274"><a href="#cb47-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-275"><a href="#cb47-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-276"><a href="#cb47-276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-277"><a href="#cb47-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-278"><a href="#cb47-278" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q5</span></span>
<span id="cb47-279"><a href="#cb47-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-280"><a href="#cb47-280" aria-hidden="true" tabindex="-1"></a>Use one of the sub-setting operations above to create a subset of the CHES data that only includes parties that received at least 10% of the vote in the last election:</span>
<span id="cb47-281"><a href="#cb47-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-284"><a href="#cb47-284" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-285"><a href="#cb47-285" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-286"><a href="#cb47-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-287"><a href="#cb47-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-288"><a href="#cb47-288" aria-hidden="true" tabindex="-1"></a><span class="fu"># Frequency tables</span></span>
<span id="cb47-289"><a href="#cb47-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-290"><a href="#cb47-290" aria-hidden="true" tabindex="-1"></a>R's <span class="in">`table`</span> command will generate either one or two-dimensional frequency tables.</span>
<span id="cb47-291"><a href="#cb47-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-294"><a href="#cb47-294" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-295"><a href="#cb47-295" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ches<span class="sc">$</span>family)</span>
<span id="cb47-296"><a href="#cb47-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-297"><a href="#cb47-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-298"><a href="#cb47-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-299"><a href="#cb47-299" aria-hidden="true" tabindex="-1"></a>In some cases, it may be more useful to examine the percentages in each group, rather than the raw frequencies. You can use the <span class="in">`prop.table`</span> function to generate proportions from an existing table object.</span>
<span id="cb47-300"><a href="#cb47-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-303"><a href="#cb47-303" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-304"><a href="#cb47-304" aria-hidden="true" tabindex="-1"></a>table_of_families<span class="ot">&lt;-</span><span class="fu">table</span>(ches<span class="sc">$</span>family)</span>
<span id="cb47-305"><a href="#cb47-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-306"><a href="#cb47-306" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(table_of_families)</span>
<span id="cb47-307"><a href="#cb47-307" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-308"><a href="#cb47-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-309"><a href="#cb47-309" aria-hidden="true" tabindex="-1"></a><span class="fu"># Crosstabs</span></span>
<span id="cb47-310"><a href="#cb47-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-311"><a href="#cb47-311" aria-hidden="true" tabindex="-1"></a>Adding a second categorical variable to the table function will generate a cross tab. The first group will be presented in the rows, and the second group in the columns. In this example, I'm creating a new variable called <span class="in">`radical_right`</span> that is TRUE if a given party is part of the radical right family. Then I'm creating a cross tab that allows me to see how many radical right parties held seats based on the year in which the election occurred: </span>
<span id="cb47-312"><a href="#cb47-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-313"><a href="#cb47-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-316"><a href="#cb47-316" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-317"><a href="#cb47-317" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>radical_right <span class="ot">&lt;-</span>  ches<span class="sc">$</span>family <span class="sc">==</span> <span class="st">"Radical Right"</span></span>
<span id="cb47-318"><a href="#cb47-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-319"><a href="#cb47-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-320"><a href="#cb47-320" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ches<span class="sc">$</span>electionyear, ches<span class="sc">$</span>radical_right)</span>
<span id="cb47-321"><a href="#cb47-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-322"><a href="#cb47-322" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-323"><a href="#cb47-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-324"><a href="#cb47-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-325"><a href="#cb47-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-326"><a href="#cb47-326" aria-hidden="true" tabindex="-1"></a>In many cases, I'm  interested in getting percentages rather than just raw frequencies. I can use the <span class="in">`prop.table`</span> function to get proportions from a frequency table. By default, <span class="in">`prop.table`</span> will just give the cell percentages:</span>
<span id="cb47-327"><a href="#cb47-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-330"><a href="#cb47-330" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-331"><a href="#cb47-331" aria-hidden="true" tabindex="-1"></a>rr_table<span class="ot">&lt;-</span><span class="fu">table</span>(ches<span class="sc">$</span>electionyear, ches<span class="sc">$</span>radical_right)</span>
<span id="cb47-332"><a href="#cb47-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-333"><a href="#cb47-333" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(rr_table)</span>
<span id="cb47-334"><a href="#cb47-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-335"><a href="#cb47-335" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-336"><a href="#cb47-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-337"><a href="#cb47-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-338"><a href="#cb47-338" aria-hidden="true" tabindex="-1"></a>...But this isn't always a useful metric. More often, we'll want to use a cross tab to answer a question like "what percentage of people in group X have characteristic Y?" For instance: "what percentage of parties in a countries parliament were from the radical right family" To answer this question, I'll need to calculate:</span>
<span id="cb47-339"><a href="#cb47-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-340"><a href="#cb47-340" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb47-341"><a href="#cb47-341" aria-hidden="true" tabindex="-1"></a>\frac{\text{Number of rad right wing parties in the data for year i}}{\text{Total number of parties in year i}}</span>
<span id="cb47-342"><a href="#cb47-342" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb47-343"><a href="#cb47-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-344"><a href="#cb47-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-345"><a href="#cb47-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-346"><a href="#cb47-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-347"><a href="#cb47-347" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q6</span></span>
<span id="cb47-348"><a href="#cb47-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-349"><a href="#cb47-349" aria-hidden="true" tabindex="-1"></a>Use <span class="in">`table`</span> and <span class="in">`prop.table`</span> function to calculate the proportion of radical right parties in each country's parliament. You'll want to look at the <span class="in">`help`</span> file for the function to figure out how to do this.</span>
<span id="cb47-350"><a href="#cb47-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-353"><a href="#cb47-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-354"><a href="#cb47-354" aria-hidden="true" tabindex="-1"></a><span class="co"># Enter your code here</span></span>
<span id="cb47-355"><a href="#cb47-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-356"><a href="#cb47-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-357"><a href="#cb47-357" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-358"><a href="#cb47-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-359"><a href="#cb47-359" aria-hidden="true" tabindex="-1"></a><span class="fu"># The Janitor package</span></span>
<span id="cb47-360"><a href="#cb47-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-361"><a href="#cb47-361" aria-hidden="true" tabindex="-1"></a>There are a number of packages that (ostensibly) help you make nicer looking cross tabs that can be easily exported to a report. Its worth exploring these to see which ones are most useful for you, but one I want to highlight is <span class="co">[</span><span class="ot">the janitor package</span><span class="co">](https://cran.r-project.org/web/packages/janitor/vignettes/tabyls.html)</span>, which allows you to use the <span class="in">`tabyl`</span> command to create tables:</span>
<span id="cb47-362"><a href="#cb47-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-363"><a href="#cb47-363" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb47-364"><a href="#cb47-364" aria-hidden="true" tabindex="-1"></a><span class="in">#| collapse: true</span></span>
<span id="cb47-365"><a href="#cb47-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-366"><a href="#cb47-366" aria-hidden="true" tabindex="-1"></a><span class="in">library(janitor)</span></span>
<span id="cb47-367"><a href="#cb47-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-368"><a href="#cb47-368" aria-hidden="true" tabindex="-1"></a><span class="in">t1 &lt;- tabyl(dat=ches, var1=electionyear, var2=radical_right)</span></span>
<span id="cb47-369"><a href="#cb47-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-370"><a href="#cb47-370" aria-hidden="true" tabindex="-1"></a><span class="in">t1</span></span>
<span id="cb47-371"><a href="#cb47-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-372"><a href="#cb47-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-373"><a href="#cb47-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-374"><a href="#cb47-374" aria-hidden="true" tabindex="-1"></a>On its own, this isn't much to write home about, but it provides a lot of nice options for <span class="in">`adorning`</span> the table with additional statistics:</span>
<span id="cb47-375"><a href="#cb47-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-378"><a href="#cb47-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-379"><a href="#cb47-379" aria-hidden="true" tabindex="-1"></a><span class="co">#| collapse: true</span></span>
<span id="cb47-380"><a href="#cb47-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-381"><a href="#cb47-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-382"><a href="#cb47-382" aria-hidden="true" tabindex="-1"></a>t1<span class="sc">|&gt;</span></span>
<span id="cb47-383"><a href="#cb47-383" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"row"</span>)<span class="sc">|&gt;</span> <span class="co"># add totals</span></span>
<span id="cb47-384"><a href="#cb47-384" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"row"</span>)<span class="sc">|&gt;</span> <span class="co"># calculate percentages</span></span>
<span id="cb47-385"><a href="#cb47-385" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="co"># format percentages</span></span>
<span id="cb47-386"><a href="#cb47-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-387"><a href="#cb47-387" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-388"><a href="#cb47-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-389"><a href="#cb47-389" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip}</span>
<span id="cb47-390"><a href="#cb47-390" aria-hidden="true" tabindex="-1"></a><span class="fu">### R-Packages for presentation-ready tables</span></span>
<span id="cb47-391"><a href="#cb47-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-392"><a href="#cb47-392" aria-hidden="true" tabindex="-1"></a>The janitor package has the advantage of having relatively simple syntax, which makes it great for exploring a data set. However, if you're looking to include cross tabs in a report or presentation you may want to consider one of the R packages that can create more aesthetically pleasing tables. For this you might want to consider <span class="co">[</span><span class="ot">`gt`</span><span class="co">](https://gt.rstudio.com/)</span>, <span class="co">[</span><span class="ot">`kableExtra`</span><span class="co">](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html)</span>, or the <span class="co">[</span><span class="ot">`modelsummary`</span><span class="co">](https://modelsummary.com/)</span> package.</span>
<span id="cb47-393"><a href="#cb47-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-394"><a href="#cb47-394" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb47-395"><a href="#cb47-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-396"><a href="#cb47-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-397"><a href="#cb47-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-398"><a href="#cb47-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-399"><a href="#cb47-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-400"><a href="#cb47-400" aria-hidden="true" tabindex="-1"></a><span class="fu"># Aggregation and grouping</span></span>
<span id="cb47-401"><a href="#cb47-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-402"><a href="#cb47-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-403"><a href="#cb47-403" aria-hidden="true" tabindex="-1"></a>We can use <span class="in">`aggregate`</span> to apply a function to each level of a categorical variable. To do this we'll use R's <span class="co">[</span><span class="ot">formula syntax</span><span class="co">](https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Formulae-for-statistical-models)</span>, which in general will look something like this:</span>
<span id="cb47-404"><a href="#cb47-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-405"><a href="#cb47-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-406"><a href="#cb47-406" aria-hidden="true" tabindex="-1"></a><span class="in">y ~ x</span></span>
<span id="cb47-407"><a href="#cb47-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-408"><a href="#cb47-408" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-409"><a href="#cb47-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-410"><a href="#cb47-410" aria-hidden="true" tabindex="-1"></a>The variable on the left will be the outcome measure you're aggregating, the variable on the right will be the category you're aggregating over. So, if we want to get the average level of corruption salience in each country, we can run this:</span>
<span id="cb47-411"><a href="#cb47-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-414"><a href="#cb47-414" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-415"><a href="#cb47-415" aria-hidden="true" tabindex="-1"></a><span class="co"># x = the formula, </span></span>
<span id="cb47-416"><a href="#cb47-416" aria-hidden="true" tabindex="-1"></a><span class="co"># FUN= should be a function you want to run for each group</span></span>
<span id="cb47-417"><a href="#cb47-417" aria-hidden="true" tabindex="-1"></a>corruption_salience <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">x =</span> corrupt_salience <span class="sc">~</span> country , </span>
<span id="cb47-418"><a href="#cb47-418" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">FUN =</span> mean, </span>
<span id="cb47-419"><a href="#cb47-419" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">data =</span> ches )</span>
<span id="cb47-420"><a href="#cb47-420" aria-hidden="true" tabindex="-1"></a>corruption_salience</span>
<span id="cb47-421"><a href="#cb47-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-422"><a href="#cb47-422" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-423"><a href="#cb47-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-424"><a href="#cb47-424" aria-hidden="true" tabindex="-1"></a><span class="fu">## dplyr method:</span></span>
<span id="cb47-425"><a href="#cb47-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-426"><a href="#cb47-426" aria-hidden="true" tabindex="-1"></a>There's also a <span class="in">`dplyr`</span> method for this, that may be a little easier to parse. Here, we just use "group by" to declare grouping variable, and then use "summarize" to summarize over members of each group.</span>
<span id="cb47-427"><a href="#cb47-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-430"><a href="#cb47-430" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-431"><a href="#cb47-431" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># if you haven't already loaded dplyr</span></span>
<span id="cb47-432"><a href="#cb47-432" aria-hidden="true" tabindex="-1"></a>newtable<span class="ot">&lt;-</span>ches<span class="sc">|&gt;</span></span>
<span id="cb47-433"><a href="#cb47-433" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country)<span class="sc">|&gt;</span></span>
<span id="cb47-434"><a href="#cb47-434" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_corruption_salience=</span> <span class="fu">mean</span>(corrupt_salience))</span>
<span id="cb47-435"><a href="#cb47-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-436"><a href="#cb47-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-437"><a href="#cb47-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-438"><a href="#cb47-438" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-439"><a href="#cb47-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-440"><a href="#cb47-440" aria-hidden="true" tabindex="-1"></a>Going forward, we'll mostly use the <span class="in">`dplyr`</span> commands for this class, but knowing <span class="in">`aggregate`</span> can be useful for interpreting other people's code.</span>
<span id="cb47-441"><a href="#cb47-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-442"><a href="#cb47-442" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q7</span></span>
<span id="cb47-443"><a href="#cb47-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-444"><a href="#cb47-444" aria-hidden="true" tabindex="-1"></a>Use either the <span class="in">`dplyr`</span> commands or <span class="in">`aggregate`</span> to get each party family's average position on redistribution issues.</span>
<span id="cb47-445"><a href="#cb47-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-448"><a href="#cb47-448" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-449"><a href="#cb47-449" aria-hidden="true" tabindex="-1"></a><span class="co"># your code here....</span></span>
<span id="cb47-450"><a href="#cb47-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-451"><a href="#cb47-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-452"><a href="#cb47-452" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-453"><a href="#cb47-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-454"><a href="#cb47-454" aria-hidden="true" tabindex="-1"></a><span class="fu"># Functions</span></span>
<span id="cb47-455"><a href="#cb47-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-456"><a href="#cb47-456" aria-hidden="true" tabindex="-1"></a>Remember that R functions are just snippets of code that we can re-use. If I have done a calculation once, I can probably write a function to apply it to more general cases.</span>
<span id="cb47-457"><a href="#cb47-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-458"><a href="#cb47-458" aria-hidden="true" tabindex="-1"></a>For instance, here's some code that I could use to get the top parties by vote share:</span>
<span id="cb47-459"><a href="#cb47-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-462"><a href="#cb47-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-463"><a href="#cb47-463" aria-hidden="true" tabindex="-1"></a><span class="co"># this gives row number for the highest to lowest value</span></span>
<span id="cb47-464"><a href="#cb47-464" aria-hidden="true" tabindex="-1"></a>top_n<span class="ot">&lt;-</span><span class="fu">order</span>(ches<span class="sc">$</span>vote, <span class="at">decreasing=</span>T)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] </span>
<span id="cb47-465"><a href="#cb47-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-466"><a href="#cb47-466" aria-hidden="true" tabindex="-1"></a><span class="co"># this subsets the values of party by the index in top_n:</span></span>
<span id="cb47-467"><a href="#cb47-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-468"><a href="#cb47-468" aria-hidden="true" tabindex="-1"></a>ches<span class="sc">$</span>party[top_n]</span>
<span id="cb47-469"><a href="#cb47-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-470"><a href="#cb47-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-471"><a href="#cb47-471" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-472"><a href="#cb47-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-473"><a href="#cb47-473" aria-hidden="true" tabindex="-1"></a>I could probably make this more generalized by creating a function.</span>
<span id="cb47-474"><a href="#cb47-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-477"><a href="#cb47-477" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-478"><a href="#cb47-478" aria-hidden="true" tabindex="-1"></a>topnFunction <span class="ot">&lt;-</span> <span class="cf">function</span>(labels, values, n){ <span class="co"># the arguments </span></span>
<span id="cb47-479"><a href="#cb47-479" aria-hidden="true" tabindex="-1"></a>  top_n <span class="ot">&lt;-</span> <span class="fu">order</span>(values, <span class="at">decreasing=</span> T)[<span class="dv">1</span><span class="sc">:</span>n] <span class="co"># the subset</span></span>
<span id="cb47-480"><a href="#cb47-480" aria-hidden="true" tabindex="-1"></a>  result<span class="ot">&lt;-</span>labels[top_n] <span class="co"># the result  </span></span>
<span id="cb47-481"><a href="#cb47-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(result) <span class="co"># the return statement</span></span>
<span id="cb47-482"><a href="#cb47-482" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb47-483"><a href="#cb47-483" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-484"><a href="#cb47-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-485"><a href="#cb47-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-486"><a href="#cb47-486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-487"><a href="#cb47-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-488"><a href="#cb47-488" aria-hidden="true" tabindex="-1"></a>Now I can use this in a bunch of different scenarios. Maybe I want to get the top parties by seat share instead of vote share, then all I need to do is change the <span class="in">`values`</span> argument:</span>
<span id="cb47-489"><a href="#cb47-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-492"><a href="#cb47-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-493"><a href="#cb47-493" aria-hidden="true" tabindex="-1"></a><span class="fu">topnFunction</span>(ches<span class="sc">$</span>party, ches<span class="sc">$</span>seat, <span class="at">n=</span><span class="dv">10</span>)</span>
<span id="cb47-494"><a href="#cb47-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-495"><a href="#cb47-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-496"><a href="#cb47-496" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-497"><a href="#cb47-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-498"><a href="#cb47-498" aria-hidden="true" tabindex="-1"></a>Or I can get more observations by changing <span class="in">`n`</span></span>
<span id="cb47-499"><a href="#cb47-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-502"><a href="#cb47-502" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-503"><a href="#cb47-503" aria-hidden="true" tabindex="-1"></a><span class="fu">topnFunction</span>(ches<span class="sc">$</span>party, ches<span class="sc">$</span>seat, <span class="at">n=</span><span class="dv">15</span>)</span>
<span id="cb47-504"><a href="#cb47-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-505"><a href="#cb47-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-506"><a href="#cb47-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-507"><a href="#cb47-507" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-508"><a href="#cb47-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-509"><a href="#cb47-509" aria-hidden="true" tabindex="-1"></a><span class="fu">## Q8</span></span>
<span id="cb47-510"><a href="#cb47-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-511"><a href="#cb47-511" aria-hidden="true" tabindex="-1"></a>How could I modify the function above to return both the party names and the values themselves?</span>
<span id="cb47-512"><a href="#cb47-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-515"><a href="#cb47-515" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb47-516"><a href="#cb47-516" aria-hidden="true" tabindex="-1"></a><span class="co">#...your code here</span></span>
<span id="cb47-517"><a href="#cb47-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-518"><a href="#cb47-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-519"><a href="#cb47-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-520"><a href="#cb47-520" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb47-521"><a href="#cb47-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-522"><a href="#cb47-522" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>